{"version":3,"file":"main.js","mappings":"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","sources":["webpack://platzivideo/./src/plugins/Ads/Ads.ts","webpack://platzivideo/./src/main.ts","webpack://platzivideo/./src/MediaPlayer.ts","webpack://platzivideo/./src/plugins/AutoPlay.ts","webpack://platzivideo/./src/plugins/AutoPause.ts","webpack://platzivideo/./src/plugins/Ads/AdsPlugin.ts"],"sourcesContent":["export interface Ad{\n    imageUrl:string;\n    title:string;\n    body:string;\n    url:string;\n}\n\nconst ALL_ADS: Ad[] = [\n    {\n      imageUrl:\n        'https://static.platzi.com/media/achievements/badge-profesional-javascript-13538df2-24ce-433f-9aa6-e34eed608e70.png',\n      title: 'Curso Profesional de JavaScript',\n      body:\n        'Mejora tus habilidades en Javascript. Conoce Typescript y cómo puedes ocuparlo para mejorar el control de tus variables.',\n      url: 'https://platzi.com/cursos/javascript-profesional/',\n    },\n  \n    {\n      imageUrl:\n        'https://static.platzi.com/media/achievements/badge-frontend-developer-8a49e681-3e22-408d-b886-2f47dfc9953a.png',\n      title: 'Curso de Frontend Developer',\n      body:\n        'Domina las bases de HTML y CSS. Define la arquitectura de tu código y construye un sitio web usando componentes estáticos. ',\n      url: 'https://platzi.com/cursos/frontend-developer/',\n    },\n  \n    {\n      imageUrl:\n        'https://static.platzi.com/media/achievements/badge-backend-node-8e6aa8a9-f7cd-42b7-bf4a-e1ee916a942b.png',\n      title: 'Curso de Backend con Node.js',\n      body:\n        'Crea aplicaciones backend utilizando Node.js, Express y Mongo. Entiende cómo funciona Javascript en un servidor y escribe aplicaciones con Node.js.',\n      url: 'https://platzi.com/cursos/backend-nodejs/',\n    },\n  \n    {\n      imageUrl:\n        'https://static.platzi.com/media/achievements/badge-prework-da6b0493-9908-40f3-ad53-f5d330b995b8.png',\n      title:\n        'Comienza tus proyectos de desarrollo para JavaScript configurando un entorno de desarrollo cómodo y adaptado a tus necesidades.',\n      body:\n        'Mejora tus habilidades en Javascript. Conoce Typescript y cómo puedes ocuparlo para mejorar el control de tus variables.',\n      url: 'https://platzi.com/cursos/prework/',\n    },\n  \n    {\n      imageUrl:\n        'https://static.platzi.com/media/achievements/badge-autenticacion-passport-6d45426a-2b24-4757-8927-7bfaf54529dd.png',\n      title: 'Curso de Autenticación con Passport.js',\n      body:\n        'Genera estrategias de autenticación Sign-In y Sign-Out usando Passport.js. Agrega autenticación con Facebook, Twitter y Google a tus desarrollos.',\n      url: 'https://platzi.com/cursos/passport/',\n    },\n  \n    {\n      imageUrl:\n        'https://static.platzi.com/media/achievements/badge-backend-frontend-02b2ac18-331a-4959-85bf-0bd3c2aa009c.png',\n      title: 'Curso de Backend for Frontend',\n      body:\n        'La ingeniería de software evoluciona día a día, no te quedes atrás. Ahora que eres un Desarrollador FullStack JavaScript necesitas evolucionar con el software, construye arquitecturas de software modernas.',\n      url: 'https://platzi.com/cursos/bff/',\n    },\n  \n    {\n      imageUrl:\n        'https://static.platzi.com/media/achievements/badge-react-adec89d0-1c35-4c9c-847e-18c284dc79dd.png',\n      title: 'Curso Práctico de React JS',\n      body:\n        'React es una de las librerías más utilizadas hoy para crear aplicaciones web. Aprende a través de la creación de la interfaz de PlatziVideo todo lo que necesitas para crear increíbles componentes con React.      ',\n      url: 'https://platzi.com/cursos/react-ejs/',\n    },\n  \n    {\n      imageUrl:\n        'https://static.platzi.com/media/achievements/badge-react-redux-2ca3c0a5-fc53-437f-bfba-69e9ddd5a803.png',\n      title: 'Curso de React Router y Redux',\n      body:\n        'Aprende de forma práctica a implementar React Router para manejar rutas en tus proyectos de frontend como un profesional.',\n      url: 'https://platzi.com/cursos/react-router-redux/',\n    },\n  ];\n\nclass Ads{\n    private static instance: Ads;\n    private ads: Ad[];\n    private constructor(){\n        this.initAds();\n    }\n    static getInstance(){\n        if(!Ads.instance){\n            Ads.instance = new Ads();\n        }\n        return Ads.instance;\n    }\n    private initAds(){\n      this.ads = [...ALL_ADS];\n    }\n    //Este método obtiene los ads 1 a 1.\n    getAds(){\n      if(this.ads.length === 0){\n        this.initAds();\n      }\n      return this.ads.pop();\n    }\n}\n\nexport default Ads;","import MediaPlayer from './MediaPlayer';\nimport AutoPlay from './plugins/AutoPlay';\nimport AutoPause from './plugins/AutoPause';\nimport AdsPlugin from './plugins/Ads/AdsPlugin';\nimport './normalize.css';\nimport './index.css';\n\n\n//Se define una constante que guarda un selector de nodos en el html\nconst node = (id) => document.querySelector(id);\n//NODOS A MANIPULAR\n//etiqueta video\nconst video:HTMLMediaElement = node(\".video-player\");\n//etiqueta de botón de play\nconst btnPlay:HTMLElement  = node(\"#video-play\");\n\nconst btnMuted:HTMLElement  = node(\"#video-muted\");\n\n//Objeto reproductor de video\nconst player = new MediaPlayer({video, plugin:[new AutoPlay(), new AutoPause(video), new AdsPlugin()]});\n//Al darle click al botón ejecutará acción de reproducir o pausar el video\nbtnPlay.addEventListener(\"click\", ()=>{\n    //Si está pausado reproduce, si está reproduciendo entonces lo pausa.\n    player.video.paused ? player.playVideo() : player.pauseVideo();\n   \n});\nbtnMuted.addEventListener(\"click\", ()=>{\n    //Si el video está silenciado, entonces activa el sonido, de lo contrario lo silencia\n    player.video.muted ? player.video.muted = false : player.video.muted = true;\n   \n});\n\n//SERVICE WORKER\n//Dentro del objeto navigator hay una propiedad llamada serviceWorker y dentro del prototy\n//Tiene una propiedad register; con ella vamos a registrar un serviworker el cual será creado\n//En el archivo sw.js\nif(\"serviceWorker\" in navigator){\n    navigator.serviceWorker.register(\"../sw.js\").catch(error =>{\n        return console.log(error.message);\n    });\n}\n","//CLASE MEDIA PLAYER\n//Se crea una clase la cual manejará el comportamiento del reproductor de video.\nexport default class MediaPlayer{\n    video:HTMLMediaElement;\n    plugins:any[];\n    container:HTMLElement;\n    constructor(config){\n        this.video = config.video;\n        this.plugins = config.plugin || [];\n        //cualquier instancia de esta clase llamará a la función iniciadora de plugins apenas sea declarada\n        this.initMediaPlayer();\n        this.initPlugins();\n    }\n    //Métodos de la clase\n    playVideo(){\n        this.video.play();\n    }\n    pauseVideo(){\n        this.video.pause();\n    }\n    muted(){\n        this.video.muted = true;\n    }\n    unmuted(){\n        this.video.muted= false;\n    }\n    private initMediaPlayer(){\n        this.container = document.createElement(\"div\");\n        this.container.classList.add(\"VideoContainer\");\n        this.container.style.position = \"relative\";\n        this.video.parentNode?.insertBefore(this.container, this.video);\n        this.container.appendChild(this.video);\n    }\n    //Este método inicializa todos los plugins asociados con el reproductor de video\n    private initPlugins(){\n        this.plugins.forEach(plugin => {\n            plugin.run(this);\n        });\n    }\n\n}\n\n","import MediaPlayer from \"../MediaPlayer\";//Importamos la clase para que exista este tipo de dato en el archivo\n//y así poder tipar con él.\n\n//CLASE AUTOPLAY\n//Se crea la clase AutoPlay la cual es un plugin para generar una reproducción automática al cargar el sito web\nexport default class AutoPlay{\n    constructor(){ \n        \n    }\n     //Enviamos un objeto \"player\" que contiene las propiedades y métodos de la clase MediaPlayer\n    run(player:MediaPlayer){\n        //Auto play busca que el video esté en muted para poderlo reproducir\n        !player.video.muted ? player.video.muted = true : false//si el video no está muted, se establece en muted\n        player.playVideo();\n    }\n} ","import MediaPlayer from \"../MediaPlayer\";//Importamos la clase para que exista este tipo de dato en el archivo\n//y así poder tipar con él.\n\nexport default class AutoPause{\n    private video:HTMLMediaElement;\n    constructor(video){\n        \n        this.video = video;\n    }\n  \n    run(player:MediaPlayer){\n        //Definimos el objeto que llevará las opciones o configuración del observador\n        const ratio = {\n            threshold : 0.25,\n        }\n        //Luego creamos una instancia de la clase InstersectionObserver\n        //En este caso la funciñon callback es definidad directamente como parámetro\n        const observer = new IntersectionObserver((entries:IntersectionObserverEntry[]) =>{\n            //Extraemos la entrada en la primera posición(ya que sólo hay una)\n            const entry= entries[0];\n            //Se compara si la cantidad de piixeles visibles del video es mayor menor a su 25%\n            const isVisible = entry.intersectionRatio >= ratio.threshold;\n            //Si es mayor, hará play; si menor, hará pause.\n            if(isVisible){\n                player.playVideo();\n            }\n            else{\n                player.pauseVideo(); \n            }\n            \n        }, ratio/*Aquí va el objeto de configuración */);\n        \n        //Observamos la etiqueta video de la página\n        observer.observe(this.video);\n\n        document.addEventListener(\"visibilitychange\", ()=>{\n            //Si el estado es visible hará play al video, de lo contrario será pause\n            if (document.visibilityState === \"visible\")\n                player.playVideo();\n            else\n                player.pauseVideo();\n        })\n        \n    }\n}","import MediaPlayer from \"../../MediaPlayer\";\nimport Ads, {Ad} from \"./Ads\";\n\nexport default class AdsPlugin{\n    private ads:Ads;\n    private currentAd:Ad | any;\n    private adsContainer:HTMLElement;\n    constructor(){\n        this.ads = Ads.getInstance();\n        this.adsContainer = document.createElement(\"div\");\n\n    }\n    run(player:MediaPlayer){\n        player.container.appendChild(this.adsContainer);\n        player.video.addEventListener(\"timeupdate\", ()=>{\n            const currentTime = Math.floor(player.video.currentTime);\n            if(currentTime % 30 === 0){\n                this.renderAd();\n            }\n        });\n    }\n    private renderAd(){\n        if(this.currentAd){\n            return;\n        }\n        const ad:any = this.ads.getAds();\n        this.currentAd = ad;\n        this.adsContainer.innerHTML = `\n        <div class=\"ads\">\n            <a class=\"ads__links\" href=\"${this.currentAd.url}\" target=\"_blank\">\n                <img class=\"ads__img\" src=\"${this.currentAd.imageUrl}\"/>\n                <div class=\"ads__info\">\n                    <h5 class=\"ads__title\">${this.currentAd.title}</h5>\n                    <p class=\"ads__body\">${this.currentAd.body}</p>\n                </div>\n            </a>\n        </div>\n        `;\n        setTimeout(()=>{\n            this.currentAd = null;\n            this.adsContainer.innerText=\"\";\n        }, 10000);\n\n    }\n}"],"names":["ALL_ADS","imageUrl","title","body","url","Ads","constructor","this","initAds","getInstance","instance","ads","getAds","length","pop","node","id","document","querySelector","video","btnPlay","btnMuted","player","config","plugins","plugin","initMediaPlayer","initPlugins","playVideo","play","pauseVideo","pause","muted","unmuted","container","createElement","classList","add","style","position","parentNode","insertBefore","appendChild","forEach","run","ratio","threshold","IntersectionObserver","entries","intersectionRatio","observe","addEventListener","visibilityState","adsContainer","Math","floor","currentTime","renderAd","currentAd","ad","innerHTML","setTimeout","innerText","paused","navigator","serviceWorker","register","catch","error","console","log","message"],"sourceRoot":""}